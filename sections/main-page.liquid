{{ 'section-main-page.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign wholesale_title = page.title | downcase
  assign is_wholesale_trade_page = false
  if page.handle == 'wholesale-and-trade-enquiries' or page.handle == 'wholesale-trade-enquiries' or page.handle == 'wholesale-trade'
    assign is_wholesale_trade_page = true
  elsif wholesale_title contains 'wholesale' and wholesale_title contains 'trade'
    assign is_wholesale_trade_page = true
  endif

  assign hero_title = ''
  assign hero_eyebrow = ''
  assign hero_intro = ''

  if page.handle == 'about-us' or page.handle == 'about'
    assign hero_eyebrow = 'Our Story'
    assign hero_title = page.title | default: 'About Us'
    assign hero_intro = 'From compostable serveware to premium cream chargers, Kiwi Catering supports New Zealand hospitality teams with reliable, planet-conscious sourcing.'
  elsif page.handle == 'contact' or page.handle == 'contact-us'
    assign hero_eyebrow = 'Talk to Us'
    assign hero_title = page.title | default: 'Contact Us'
    assign hero_intro = 'Need guidance on product selection, shipping windows, or trade pricing? Our Auckland specialists respond within one business day.'
  endif

  if is_wholesale_trade_page
    assign hero_eyebrow = 'Trade Partnerships'
    assign hero_title = page.title | default: 'Wholesale & Trade Enquiries'
    assign hero_intro = 'Scale your menu rollouts with bulk pricing, pallet-ready stock, and fulfilment support tailored to nationwide hospitality partners.'
  endif

  assign has_custom_hero = false
  if hero_title != ''
    assign has_custom_hero = true
  endif
-%}

{%- if is_wholesale_trade_page -%}
  {{ 'section-contact-form.css' | asset_url | stylesheet_tag }}
{%- endif -%}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
  {%- if has_custom_hero -%}
    .page-hero {
      position: relative;
      max-width: var(--page-width);
      margin: 0 auto clamp(32px, 6vw, 64px);
      padding: clamp(32px, 6vw, 64px) clamp(24px, 6vw, 56px);
      border-radius: 3.2rem;
      background: linear-gradient(135deg, rgba(var(--brand-color-primary), 0.13), rgba(var(--brand-color-primary-dark, 6, 26, 12), 0.08));
      box-shadow: 0 28px 54px -32px rgba(20, 45, 24, 0.32);
      overflow: hidden;
    }

    .page-hero::after {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 100% 0%, rgba(255, 255, 255, 0.55), transparent 46%);
      opacity: 0.7;
      pointer-events: none;
    }

    .page-hero__inner {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      gap: clamp(1.2rem, 2vw, 2.6rem);
      max-width: 60rem;
    }

    .page-hero__eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.6rem 1.2rem;
      border-radius: 999px;
      background: rgba(var(--brand-color-primary), 0.16);
      color: rgb(var(--brand-color-primary-dark, 6, 26, 12));
      font-size: 1.2rem;
      font-weight: 600;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      width: max-content;
    }

    .page-hero__title {
      margin: 0;
      font-size: clamp(3.2rem, 5vw, 4.2rem);
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .page-hero__intro {
      margin: 0;
      color: rgba(var(--color-foreground), 0.78);
      font-size: 1.6rem;
      line-height: 1.7;
      max-width: 54rem;
    }
  {%- endif -%}
  {%- if is_wholesale_trade_page -%}
    .wholesale-contact-section {
      padding: 32px 0;
    }

    @media screen and (min-width: 750px) {
      .wholesale-contact-section {
        padding: 48px 0;
      }
    }

    @media screen and (min-width: 990px) {
      .wholesale-contact-section .contact__wrapper {
        align-items: stretch;
      }

      .wholesale-contact-section .contact__intro {
        height: 100%;
        padding-bottom: 2rem;
      }

      .wholesale-contact-section .contact__card {
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      .wholesale-contact-section .contact__form {
        display: flex;
        flex-direction: column;
        gap: 1.8rem;
        flex: 1;
        min-height: 100%;
      }

      .wholesale-contact-section .contact__fields {
        flex-grow: 1;
        min-height: 0;
      }

      .wholesale-contact-section .contact__form .field,
      .wholesale-contact-section .contact__form .text-area {
        flex-grow: 0;
      }

      .wholesale-contact-section .contact__button {
        margin-top: auto;
        padding-top: 1rem;
      }
    }
  {%- endif -%}
{%- endstyle -%}

{%- liquid
  assign recipe_blog = blogs['recipes'] | default: nil
  assign recipe_article = nil
  if recipe_blog and recipe_blog.articles_count > 0
    assign recipe_article = recipe_blog.articles | where: 'handle', page.handle | first
  endif
-%}

{%- if has_custom_hero -%}
  <section class="page-hero">
    <div class="page-hero__inner">
      {%- if hero_eyebrow != '' -%}
        <span class="page-hero__eyebrow">{{ hero_eyebrow }}</span>
      {%- endif -%}
      <h1 class="page-hero__title">{{ hero_title }}</h1>
      {%- if hero_intro != '' -%}
        <p class="page-hero__intro">{{ hero_intro }}</p>
      {%- endif -%}
    </div>
  </section>
{%- endif -%}

{%- if recipe_article -%}
  <div class="page-width page-width--narrow section-{{ section.id }}-padding">
    <article class="main-page-article{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}">
      <h1 class="main-page-title page-title h0">
        {{ recipe_article.title | escape }}
      </h1>
      {%- if recipe_article.image -%}
        <figure class="main-page-article__image{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
          <img
            srcset="
              {%- if recipe_article.image.width >= 400 -%}{{ recipe_article.image | image_url: width: 400 }} 400w,{%- endif -%}
              {%- if recipe_article.image.width >= 800 -%}{{ recipe_article.image | image_url: width: 800 }} 800w,{%- endif -%}
              {%- if recipe_article.image.width >= 1200 -%}{{ recipe_article.image | image_url: width: 1200 }} 1200w,{%- endif -%}
              {{ recipe_article.image | image_url }} {{ recipe_article.image.width }}w
            "
            src="{{ recipe_article.image | image_url: width: 800 }}"
            sizes="(min-width: 750px) 680px, calc(100vw - 2rem)"
            alt="{{ recipe_article.image.alt | default: recipe_article.title | escape }}"
            loading="lazy"
            width="{{ recipe_article.image.width }}"
            height="{{ recipe_article.image.height }}"
          >
        </figure>
      {%- endif -%}
      <div class="rte main-page-article__content">
        {{ recipe_article.content }}
      </div>
    </article>
  </div>
{%- elsif page.handle == 'faqs' -%}
  {{ 'component-accordion.css' | asset_url | stylesheet_tag }}
  {{ 'collapsible-content.css' | asset_url | stylesheet_tag }}
  {{ 'section-related-products.css' | asset_url | stylesheet_tag }}

  {%- assign faq_questions = "Do you ship nationwide in New Zealand?|||How much does shipping cost, and do you offer free shipping?|||How long will my delivery take to arrive?|||Do you offer order pickup or click-and-collect?|||How can I track my order?|||What is your returns and exchange policy?|||What if my order arrives damaged or with missing items?|||Do your products come with a warranty?|||What payment methods do you accept?|||Are prices inclusive of GST? Can I get a GST invoice?" | split: "|||" -%}

  {%- assign faq_answers = "Yes, Kiwi Catering Supplies ships across New Zealand, including both the North and South Islands. Orders are sent via tracked courier and usually arrive within three working days (allow up to five days for rural addresses). Same-day delivery is available for Auckland Central orders, free for large orders over $250. You will receive a tracking link once your order ships. Pickup is also available from our Auckland location by prior arrangement via our Contact page (/pages/contact-us).|||Standard shipping anywhere in New Zealand costs $10 per order, with free shipping on orders over $150. The free shipping threshold is applied automatically at checkout. Same-day Auckland delivery may incur a fee for smaller orders, which is waived for orders over $250 as part of a limited promotion. All shipping costs are shown clearly at checkout.|||Most orders arrive within about three working days after dispatch. Orders placed before 2 pm are usually sent the same day, though this may vary during busy periods. North Island deliveries typically take one to two days, while South Island and rural deliveries can take up to five days. A tracking number will be provided so you can follow your delivery.|||Yes, Click & Collect is available from our Auckland warehouse at 41E Morrin Road. To arrange pickup, select the Pickup option at checkout or contact us beforehand. We will confirm when your order is ready, usually on the same or next business day. Pickup is free. Please bring your order confirmation or ID when collecting.|||When your order ships, you will receive an email with a tracking number and link to the courier's tracking page. Click the link to view delivery progress and estimated arrival. If you have not received tracking details within two business days of ordering, please contact us through our Contact page (/pages/contact-us).|||If an item arrives faulty, damaged, or not as described, we will provide a remedy in line with New Zealand's Consumer Guarantees Act. This may include a replacement, repair, or refund. We do not offer refunds or exchanges for change of mind, so please choose carefully. If there is an issue with your order, contact us and we will help resolve it.|||If your order is damaged or missing items, contact us right away. We may ask for photos of any damage for our courier claim. We will arrange a free replacement or refund for affected items, and any missing products will be sent out as soon as possible at no extra charge.|||All products are covered by New Zealand consumer law guarantees for quality and durability. If a product has a manufacturing fault or is not fit for purpose, we will repair or replace it at no cost. Some items, such as cream dispensers, may also include a manufacturer's warranty. Please check the product page or manual for details. The warranty does not cover misuse or normal wear.|||We accept all major credit and debit cards, including Visa, MasterCard, Amex, and UnionPay. You can also pay using Apple Pay, Google Pay, or Shop Pay. All payments are processed securely, with card data encrypted during transfer. We do not currently offer Afterpay or Laybuy instalment options.|||Yes, all prices include GST (15%). Your order confirmation email serves as a tax invoice showing the GST component. If you need a separate GST invoice with our GST number, contact us and we will provide one. Kiwi Catering Supplies is GST-registered, so business customers can claim back the GST as usual." | split: "|||" -%}

  <div class="collapsible-content collapsible-none-layout isolate">
    <div class="collapsible-content__wrapper section-{{ section.id }}-padding">
      <div class="collapsible-content-wrapper-narrow">
        <h1 class="collapsible-content__heading inline-richtext h1 related-products__heading" style="text-align: center;">
          {{ page.title | default: 'Frequently Asked Questions' | escape }}
        </h1>
        <div class="grid grid--1-col collapsible-content__grid">
          <div class="grid__item">
            {%- for question in faq_questions -%}
              {%- assign answer = faq_answers[forloop.index0] -%}
              <div class="accordion">
                <details>
                  <summary class="cc__summary">
                    <h3 class="accordion__title inline-richtext h4">
                      {{ question | strip }}
                    </h3>
                    {{- 'icon-caret.svg' | inline_asset_content -}}
                  </summary>
                  <div class="cc__panel">
                    <div class="accordion__content rte">
                      <p>{{ answer | strip }}</p>
                    </div>
                  </div>
                </details>
              </div>
            {%- endfor -%}
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {%- for question in faq_questions -%}
          {
            "@type": "Question",
            "name": {{ question | strip | json }},
            "acceptedAnswer": {
              "@type": "Answer",
              "text": {{ faq_answers[forloop.index0] | strip | json }}
            }
          }{%- unless forloop.last -%},{%- endunless -%}
        {%- endfor -%}
      ]
    }
  </script>
{%- elsif page.handle != 'contact' and page.handle != 'contact-us' -%}
  <div class="page-width page-width--narrow section-{{ section.id }}-padding">
    {%- if has_custom_hero -%}
      <h1 class="visually-hidden">{{ page.title | escape }}</h1>
    {%- else -%}
      <h1 class="main-page-title page-title h0{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}">
        {{ page.title | escape }}
      </h1>
    {%- endif -%}
    <div class="rte{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
      {{ page.content }}
    </div>
  </div>
{%- endif -%}

{%- if is_wholesale_trade_page -%}
  {%- assign wholesale_form_id = 'WholesaleContactForm' -%}
  <div class="color-scheme-1 gradient">
    <div class="contact contact--layout page-width wholesale-contact-section">
      <div class="contact__wrapper">
        <div class="contact__intro{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
          <span class="contact__eyebrow">Wholesale &amp; Trade</span>
          <h2 class="title inline-richtext h1">
            Partner with Kiwi Catering
          </h2>
          <div class="contact__copy rte">
            <p>Share your business details and our wholesale team will be in touch with tailored pricing, bulk availability, and fulfilment support.</p>
          </div>
          <div class="contact__details">
            <div class="contact-detail">
              <span class="contact-detail__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                  <path d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2a1 1 0 011.01-.24 11.36 11.36 0 003.56.57 1 1 0 011 1V20a1 1 0 01-1 1A16 16 0 013 5a1 1 0 011-1h3.5a1 1 0 011 1 11.36 11.36 0 00.57 3.56 1 1 0 01-.24 1.01z" />
                </svg>
              </span>
              <div class="contact-detail__body">
                <p class="contact-detail__label">Call us</p>
                <a class="contact-detail__value" href="tel:0800374699">0800 374 699</a>
              </div>
            </div>
            <div class="contact-detail">
              <span class="contact-detail__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" role="presentation" focusable="false">
                  <path d="M20 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2zm0 2l-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z" />
                </svg>
              </span>
              <div class="contact-detail__body">
                <p class="contact-detail__label">Email</p>
                <a class="contact-detail__value" href="mailto:sales@kiwicatering.co.nz">sales@kiwicatering.co.nz</a>
              </div>
            </div>
          </div>
        </div>
        <div class="contact__card{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
          {%- form 'contact', id: wholesale_form_id, class: 'contact__form isolate' -%}
            {%- if form.posted_successfully? -%}
              <h2 class="form-status form-status-list form__message" tabindex="-1" autofocus>
                {{- 'icon-success.svg' | inline_asset_content -}}
                {{ 'templates.contact.form.post_success' | t }}
              </h2>
            {%- elsif form.errors -%}
              <div class="form__message">
                <h2 class="form-status caption-large text-body" role="alert" tabindex="-1" autofocus>
                  {{- 'icon-error.svg' | inline_asset_content -}}
                  {{ 'templates.contact.form.error_heading' | t }}
                </h2>
              </div>
              <ul class="form-status-list caption-large" role="list">
                <li>
                  <a href="#WholesaleContact-email" class="link">
                    {{ form.errors.translated_fields.email | capitalize }}
                    {{ form.errors.messages.email }}
                  </a>
                </li>
              </ul>
            {%- endif -%}
            <div class="contact__fields">
              <div class="field">
                <input
                  class="field__input"
                  autocomplete="name"
                  type="text"
                  id="WholesaleContact-name"
                  name="contact[{{ 'templates.contact.form.name' | t }}]"
                  value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}"
                  placeholder="{{ 'templates.contact.form.name' | t }}"
                >
                <label class="field__label" for="WholesaleContact-name">{{ 'templates.contact.form.name' | t }}</label>
              </div>
              <div class="field field--with-error">
                <input
                  autocomplete="email"
                  type="email"
                  id="WholesaleContact-email"
                  class="field__input"
                  name="contact[email]"
                  spellcheck="false"
                  autocapitalize="off"
                  value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}"
                  aria-required="true"
                  {% if form.errors contains 'email' %}
                    aria-invalid="true"
                    aria-describedby="WholesaleContact-email-error"
                  {% endif %}
                  placeholder="{{ 'templates.contact.form.email' | t }}"
                >
                <label class="field__label" for="WholesaleContact-email">
                  {{- 'templates.contact.form.email' | t }}
                  <span aria-hidden="true">*</span></label
                >
                {%- if form.errors contains 'email' -%}
                  <small class="contact__field-error" id="WholesaleContact-email-error">
                    <span class="visually-hidden">{{ 'accessibility.error' | t }}</span>
                    <span class="form__message">
                      <span class="svg-wrapper">
                        {{- 'icon-error.svg' | inline_asset_content -}}
                      </span>
                      {{- form.errors.translated_fields.email | capitalize }}
                      {{ form.errors.messages.email -}}
                    </span>
                  </small>
                {%- endif -%}
              </div>
            </div>
            <div class="field">
              <input
                type="tel"
                id="WholesaleContact-phone"
                class="field__input"
                autocomplete="tel"
                name="contact[{{ 'templates.contact.form.phone' | t }}]"
                pattern="[0-9\\-\\+\\s]*"
                value="{% if form.phone %}{{ form.phone }}{% elsif customer %}{{ customer.phone }}{% endif %}"
                placeholder="{{ 'templates.contact.form.phone' | t }}"
              >
              <label class="field__label" for="WholesaleContact-phone">{{ 'templates.contact.form.phone' | t }}</label>
            </div>
            <div class="field">
              <input
                type="text"
                id="WholesaleContact-company"
                class="field__input"
                name="contact[Company name]"
                value="{% if form['Company name'] %}{{ form['Company name'] }}{% endif %}"
                placeholder="Company name"
              >
              <label class="field__label" for="WholesaleContact-company">Company name</label>
            </div>
            <div class="field">
              <textarea
                rows="8"
                id="WholesaleContact-message"
                class="text-area field__input"
                name="contact[{{ 'templates.contact.form.comment' | t }}]"
                placeholder="{{ 'templates.contact.form.comment' | t }}"
              >{{ form.body }}</textarea>
              <label class="form__label field__label" for="WholesaleContact-message">
                {{- 'templates.contact.form.comment' | t -}}
              </label>
            </div>
            <div class="contact__button">
              <button type="submit" class="button">
                Submit enquiry
              </button>
            </div>
          {%- endform -%}
        </div>
      </div>
    </div>
  </div>
{%- endif -%}

{% schema %}
{
  "name": "t:sections.main-page.name",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ]
}
{% endschema %}
